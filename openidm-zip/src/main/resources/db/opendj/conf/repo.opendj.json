{
  "connection": {
    "default": {
      "connectionSecurity": "none",
      "trustManager": "trustAll",
      "fileBasedTrustManagerType": "JKS",
      "fileBasedTrustManagerFile": "/path/to/truststore",
      "fileBasedTrustManagerPassword": "password",
      "connectionPoolSize": 24,
      "heartBeatIntervalSeconds": 30,
      "heartBeatTimeoutMilliSeconds": 500,
      "primaryLDAPServers": [{ "hostname": "localhost", "port": 1389 }],
      "secondaryLDAPServers": []
    },
    "root": {
      "inheritFrom": "default",
      "authentication": {
        "simple": { "bindDN": "cn=directory manager", "bindPassword": "password" }
      }
    }
  },
  "queries": {
    "query-all-ids": {
      "_queryFilter": "true",
      "_fields": "_id,_rev"
    },
    "credential-query": {
      "_queryFilter": "/userName eq \"${username}\""
    },
    "credential-internaluser-query": {
      "_queryFilter": "/_id eq \"${username}\""
    },
    "find-by-id": {
      "_queryFilter": "/_id eq \"${id}\""
    },
    "get-by-field-value": {
      "_queryFilter": "/${field} eq \"${value}\""
    },
    "for-userName":	{
      "_queryFilter": "/userName eq \"${uid}\""
    },
    "get-users-of-direct-role": {
      "_queryFilter": "/roles eq \"${role}\""
    },
    "query-all": {
      "_queryFilter": "true"
    },
    "query-all-count": {
      "_queryFilter": "true"
    },
    "get-managed-users": {
      "_queryFilter": "true"
    },
    "get-managed-users-count": {
      "_queryFilter": "true"
    },
    "get-managed-users-filtered": {
      "_queryFilter": "/userName sw \"${userName}\" AND /mail sw \"${mail}\" AND /givenName sw \"${givenName}\" AND /sn sw \"${sn}\" AND /accountStatus sw \"${accountStatus}\""
    },
    "get-managed-users-filtered-count": {
      "_queryFilter": "/userName sw \"${userName}\" AND /mail sw \"${mail}\" AND /givenName sw \"${givenName}\" AND /sn sw \"${sn}\" AND /accountStatus sw \"${accountStatus}\""
    },
    "links-for-firstId": {
      "_queryFilter": "/linkType eq \"${linkType}\" AND /firstid = \"${firstId}\""
    },
    "links-for-secondId": {
      "_queryFilter": "/linkType eq \"${linkType}\" AND /secondid = \"${secondId}\""
    },
    "links-for-linkType": {
      "_queryFilter": "/linkType eq \"${linkType}\""
    }
  },
  "mappings": {
    "link": {
      "rest2ldapConfig": {
        "baseDN": "ou=Links,dc=openidm,dc=forgerock,dc=com",
        "usePermissiveModify": true,
        "additionalLDAPAttributes": [
          {
            "values": [
              "top",
              "openidmLink"
            ],
            "type": "objectClass"
          }
        ],
        "readOnUpdatePolicy": "controls",
        "etagAttribute": "etag",
        "useSubtreeDelete": false,
        "attributes": {
          "_id": {
            "simple": { "ldapAttribute": "objectid", "isRequired": true, "writability": "createOnly", "isSingleValued": true }
          },
          "_rev": {
            "simple": { "ldapAttribute": "etag", "writability": "readOnly",  "isSingleValued": true }
          },
          "linkType": {
            "simple": { "ldapAttribute": "linktype", "isSingleValued": true }
          },
          "linkQualifier": {
            "simple": { "ldapAttribute": "linkqualifier", "isSingleValued": true }
          },
          "firstId": {
            "simple": { "ldapAttribute": "firstid", "isSingleValued": true }
          },
          "secondId": {
            "simple": { "ldapAttribute": "secondid", "isSingleValued": true }
          }
        },
        "namingStrategy": {
          "dnAttribute": "objectid",
          "strategy": "clientDNNaming"
        }
      }
    },
    "internal/user": {
      "propertiesToStringify": [ "password" ],
      "rest2ldapConfig": {
        "baseDN": "ou=Users,ou=Internal,dc=openidm,dc=forgerock,dc=com",
        "usePermissiveModify": true,
        "additionalLDAPAttributes": [
          {
            "values": [
              "top",
              "openidmInternalUser"
            ],
            "type": "objectClass"
          }
        ],
        "readOnUpdatePolicy": "controls",
        "etagAttribute": "etag",
        "useSubtreeDelete": false,
        "attributes": {
          "_id": {
            "simple": { "ldapAttribute": "uid", "isRequired": true, "writability": "createOnly", "isSingleValued": true }
          },
          "_rev": {
            "simple": { "ldapAttribute": "etag", "writability": "readOnly",  "isSingleValued": true }
          },
          "roles": {
            "simple": { "ldapAttribute": "roles", "isSingleValued": false }
          },
          "password": {
            "simple": { "ldapAttribute": "password", "isSingleValued": true }
          }
        },
        "namingStrategy": {
          "dnAttribute": "uid",
          "strategy": "clientDNNaming"
        }
      }
    },
    "managed/user": {
      "propertiesToStringify" : [ "password", "effectiveAssignments" ],
      "rest2ldapConfig": {
        "baseDN": "ou=Users,ou=Managed,dc=openidm,dc=forgerock,dc=com",
        "usePermissiveModify": true,
        "additionalLDAPAttributes": [
          {
            "values": [
              "top",
              "person",
              "organizationalPerson",
              "inetOrgPerson",
              "openidmManagedUser"
            ],
            "type": "objectClass"
          }
        ],
        "readOnUpdatePolicy": "controls",
        "etagAttribute": "etag",
        "useSubtreeDelete": false,
        "attributes": {
          "_id": {
            "simple": { "ldapAttribute": "uid", "isRequired": true, "writability": "createOnly", "isSingleValued": true }
          },
          "_rev": {
            "simple": { "ldapAttribute": "etag", "writability": "readOnly",  "isSingleValued": true }
          },
          "userName": {
            "simple": { "ldapAttribute": "cn", "isSingleValued": true }
          },
          "password": {
            "simple": { "ldapAttribute": "password", "isSingleValued": true }
          },
          "accountStatus": {
            "simple": { "ldapAttribute": "accountStatus", "isSingleValued": true }
          },
          "roles": {
            "simple": { "ldapAttribute": "roles", "isSingleValued": false }
          },
          "effectiveRoles": {
            "simple": { "ldapAttribute": "effectiveRoles", "isSingleValued": false }
          },
          "effectiveAssignments": {
            "simple": { "ldapAttribute": "effectiveAssignments", "isSingleValued": true }
          },
          "lastPasswordSet": {
            "simple": { "ldapAttribute": "lastPasswordSet", "isSingleValued": true }
          },
          "postalCode": {
            "simple": { "ldapAttribute": "postalCode", "isSingleValued": true }
          },
          "stateProvince": {
            "simple": { "ldapAttribute": "st", "isSingleValued": true }
          },
          "passwordAttempts": {
            "simple": { "ldapAttribute": "passwordAttempts", "isSingleValued": true }
          },
          "lastPasswordAttempt": {
            "simple": { "ldapAttribute": "lastPasswordAttempt", "isSingleValued": true }
          },
          "postalAddress": {
            "simple": { "ldapAttribute": "postalAddress", "isSingleValued": true }
          },
          "displayName": {
            "simple": { "ldapAttribute": "displayName", "isSingleValued": true }
          },
          "description": {
            "simple": { "ldapAttribute": "description", "isSingleValued": true }
          },
          "country": {
            "simple": { "ldapAttribute": "country", "isSingleValued": true }
          },
          "address2": {
            "simple": { "ldapAttribute": "address2", "isSingleValued": true }
          },
          "city": {
            "simple": { "ldapAttribute": "l", "isSingleValued": true }
          },
          "givenName": {
            "simple": { "ldapAttribute": "givenName", "isSingleValued": true }
          },
          "sn": {
            "simple": { "ldapAttribute": "sn", "isSingleValued": true }
          },
          "telephoneNumber": {
            "simple": { "ldapAttribute": "telephoneNumber", "isSingleValued": true }
          },
          "mail": {
            "simple": { "ldapAttribute": "mail", "isSingleValued": true }
          },
          "siteImage": {
            "simple": { "ldapAttribute": "jpegPhoto", "isSingleValued": true }
          },
          "passPhrase": {
            "simple": { "ldapAttribute": "passPhrase", "isSingleValued": true }
          },
          "securityAnswer": {
            "simple": { "ldapAttribute": "securityAnswer", "isSingleValued": true }
          },
          "securityQuestion": {
            "simple": { "ldapAttribute": "securityQuestion", "isSingleValued": true }
          },
          "securityAnswerAttempts": {
            "simple": { "ldapAttribute": "securityAnswerAttempts", "isSingleValued": true }
          },
          "lastSecurityAnswerAttempt": {
            "simple": { "ldapAttribute": "lastSecurityAnswerAttempt", "isSingleValued": true }
          },
          "total": {
            "simple": { "ldapAttribute": "total", "isSingleValued": true }
          }
        },
        "namingStrategy": {
          "dnAttribute": "uid",
          "strategy": "clientDNNaming"
        }
      }
    }
  }
}
